---
import { getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import TopLayout from "@layouts/TopLayout.astro";
import BottomLayout from "@layouts/BottomLayout.astro";
import SearchCollection from "@components/SearchCollection";
import { BLOG } from "@consts";

const posts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const tags = [...new Set(posts.flatMap((post) => post.data.tags))].sort(
  (a, b) => a.localeCompare(b),
);

const estimated_initial_size =
  28 + posts.length * 158 + (posts.length - 1) * 12;
---

<PageLayout title={BLOG.TITLE} description={BLOG.DESCRIPTION}>
  <TopLayout>
    <div class="animate">
      <h1 class="text-3xl text-center md:text-start font-semibold text-black dark:text-white mt-2">
        Create new blog post
      </h1>
    </div>
    <div class="animate my-5">
        <form method="post" class="grid" action="/blog/upload">
            <label for="title" class="block">
                Title
            </label>
            <div class="mt-1">
                <input
                type="text"
                name="title"
                id="title"
                class="mt-1 block w-full mb-5 rounded-md bg-gray-100 dark:bg-zinc-900 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"
                placeholder="Enter your blog title here..."
                />
            </div>
            
            <label for="content" class="block">
                Blog Content
            </label>
            <div class="mt-1">
                <textarea
                id="content"
                name="content"
                rows="10"
                class="mt-1 block w-full rounded-md bg-gray-100 dark:bg-zinc-900 border-transparent focus:border-gray-500 focus:bg-white focus:ring-0"
                placeholder="Write your blog content here..."
                ></textarea>
            </div>
            <p class="mt-2 text-sm text-gray-500 dark:text-gray-400  mb-5">
                Supports Markdown syntax for rich text formatting.
            </p>
            <button
                type="submit"
                class="bg-black dark:bg-white w-max md:place-self-end text-white dark:text-black px-3 py-2 rounded text-sm text-center"
            >
                Submit Post
            </button>
        </form>

    </div>
  </TopLayout>
</PageLayout>
